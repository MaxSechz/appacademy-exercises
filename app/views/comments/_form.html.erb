<% action_url, button_text, hidden = comments_url, "New comment", nil %>
<%
if comment.persisted?
  action_url = comment_url(comment)
  button_text = "Update comment"
  hidden = update_html
end
%>

<h1><%= button_text %></h1>

<br>

<form id="comment_form" action="<%= action_url %>" method="post">
  <%= hidden %>
  <%= token_tag form_authenticity_token %>

  <input type="hidden" name="comment[parent_comment_id]" value="<%= comment.parent_comment_id %>">
  <label>Description<br>
    <textarea name="comment[content]"><%= comment.content %></textarea></label>
  <input
    type="hidden"
    name="comment[post_id]"
    value="<%= params[:post_id] %>">
  <br>

  <button name="button"><%= button_text %></button>
</form>
